import { motion } from 'framer-motion';
import { useState, useRef, useEffect } from 'react';
import { Block } from './Block';

const progress = [
  {
    id: 0,
    rect: {
      x: 90,
      y: 0,
    },
    circle: {
      style: { x: 148, y: 28 },
      x: 70,
      y: 134,
    },
  },
  {
    id: 1,
    rect: {
      x: 0,
      y: 112,
    },
    circle: {
      style: { x: 70, y: 134 },
      x: 224,
      y: 134,
    },
  },
  {
    id: 2,
    rect: {
      x: 180,
      y: 112,
    },
    circle: {
      style: { x: 224, y: 134 },
      x: 148,
      y: 28,
    },
  },
];

export function Triangle() {
  const [index, setIndex] = useState(0);
  const timeout = useRef<NodeJS.Timeout>();

  const onChange = () => {
    if (index < 2) {
      setIndex(index + 1);
    } else {
      setIndex(0);
    }
  };

  useEffect(() => {
    timeout.current = setTimeout(onChange, 2500);

    return () => {
      if (timeout.current) {
        clearTimeout(timeout.current);
      }
    };
  }, [index]);

  return (
    <div className="flex justify-center items-center relative">
      <span className="flex w-72">
        <motion.svg viewBox="0 0 296 169" fill="none">
          <motion.path
            d="M148 29L225.942 134H70.0577L148 29Z"
            stroke="#334155"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeDasharray="4 4"
          />
          <motion.rect x="90" width="116" height="50" rx="25" fill="#FEF0A3" />
          <motion.rect y="112" width="116" height="50" rx="25" fill="#FEF0A3" />
          <motion.rect
            x="180"
            y="112"
            width="116"
            height="50"
            rx="25"
            fill="#FEF0A3"
          />
          {progress.map(
            (item) =>
              index === item.id && (
                <Block item={item} key={`rect_${item.id}`} />
              ),
          )}
          <motion.path
            d="M139.79 21H141.021V17.4795H143.304C145.156 17.4795 146.469 16.1738 146.469 14.3008V14.2871C146.469 12.4141 145.156 11.1357 143.304 11.1357H139.79V21ZM142.989 12.2295C144.397 12.2295 145.211 13.002 145.211 14.3008V14.3145C145.211 15.6133 144.397 16.3857 142.989 16.3857H141.021V12.2295H142.989ZM152.054 21.1641C154.85 21.1641 156.593 19.2021 156.593 16.0713V16.0576C156.593 12.9336 154.843 10.9717 152.054 10.9717C149.258 10.9717 147.501 12.9336 147.501 16.0576V16.0713C147.501 19.2021 149.251 21.1641 152.054 21.1641ZM152.054 20.0293C150.03 20.0293 148.759 18.498 148.759 16.0713V16.0576C148.759 13.6309 150.037 12.1064 152.054 12.1064C154.063 12.1064 155.335 13.6377 155.335 16.0576V16.0713C155.335 18.4775 154.084 20.0293 152.054 20.0293ZM115.268 30.832V31.714H126.314V30.832H115.268ZM114.526 27.416V28.27H125.614V27.416H114.526ZM117.788 33.156V34.01H125.404V33.156H117.788ZM117.48 35.41V36.264H125.068V35.41H117.48ZM116.22 37.944V38.84H126.202V37.944H116.22ZM119.44 26.254V28.018H120.49V26.254H119.44ZM120.672 32.022V38.308H121.708V32.022H120.672ZM114.722 30.832V33.086C114.722 34.682 114.582 36.936 113.448 38.574C113.672 38.7 114.106 39.036 114.274 39.246C115.52 37.468 115.758 34.878 115.758 33.1V30.832H114.722ZM117.942 31.98C117.564 33.03 116.92 34.066 116.178 34.766C116.416 34.892 116.808 35.158 116.976 35.312C117.732 34.556 118.446 33.394 118.88 32.204L117.942 31.98ZM116.626 28.76C118.894 29.292 121.708 30.258 123.248 30.958L123.906 30.356C122.324 29.684 119.496 28.732 117.298 28.2L116.626 28.76ZM122.674 28.004C121.302 29.012 118.32 29.838 115.982 30.258C116.122 30.426 116.318 30.748 116.402 30.93C118.838 30.454 121.764 29.572 123.43 28.41L122.674 28.004ZM131.214 27.85H136.814V30.51H131.214V27.85ZM130.192 26.842V31.518H137.878V26.842H130.192ZM128.162 33.002V39.12H129.156V34.01H132.096V39.008H133.146V33.002H128.162ZM134.672 33.002V39.12H135.68V34.01H138.886V39.036H139.936V33.002H134.672ZM128.61 37.356V38.364H132.516V37.356H128.61ZM135.19 37.356V38.364H139.348V37.356H135.19ZM145.508 27.29L144.836 28.13H149.68V27.29H145.508ZM144.514 32.414H151.668V33.716H144.514V32.414ZM144.514 34.528H151.668V35.844H144.514V34.528ZM144.514 30.328H151.668V31.602H144.514V30.328ZM143.464 29.46V36.698H152.746V29.46H143.464ZM145.536 26.254C144.836 27.514 143.52 29.04 141.686 30.16C141.938 30.328 142.302 30.664 142.47 30.902C144.402 29.628 145.774 28.018 146.698 26.478L145.536 26.254ZM149.316 27.29V27.5C149.008 28.158 148.308 29.11 147.692 29.698C147.916 29.824 148.266 30.048 148.462 30.202C149.134 29.572 149.96 28.564 150.422 27.71L149.708 27.234L149.54 27.29H149.316ZM149.246 37.482C150.716 38.014 152.214 38.672 153.096 39.148L154.202 38.574C153.208 38.084 151.556 37.412 150.072 36.894L149.246 37.482ZM145.83 36.88C144.85 37.454 143.198 38.014 141.798 38.336C142.036 38.532 142.414 38.966 142.596 39.176C143.968 38.756 145.718 38.056 146.838 37.342L145.83 36.88ZM156.582 27.122V27.892H167.516V27.122H156.582ZM157.24 28.648V29.362H166.942V28.648H157.24ZM155.798 30.188V30.972H168.23V30.188H155.798ZM158.542 33.94H165.598V34.836H158.542V33.94ZM158.542 35.508H165.598V36.418H158.542V35.508ZM158.542 32.386H165.598V33.282H158.542V32.386ZM157.52 31.714V37.104H166.662V31.714H157.52ZM161.454 26.24V30.566H162.518V26.24H161.454ZM163.134 37.734C164.66 38.182 166.172 38.728 167.054 39.134L168.258 38.602C167.236 38.182 165.542 37.622 164.002 37.202L163.134 37.734ZM159.9 37.174C158.892 37.678 157.198 38.112 155.742 38.392C155.98 38.574 156.344 38.966 156.512 39.176C157.912 38.826 159.704 38.224 160.838 37.594L159.9 37.174ZM175.272 26.674C175.174 28.536 175.174 35.27 169.462 38.182C169.784 38.42 170.134 38.742 170.316 39.008C176.112 35.858 176.322 28.872 176.434 26.674H175.272ZM176.392 26.954L175.384 27.052C175.482 28.34 175.874 36.166 181.81 39.008C181.978 38.714 182.3 38.364 182.608 38.126C176.84 35.48 176.434 28.046 176.392 26.954Z"
            fill="black"
          />

          <motion.path
            d="M52.21 133.164C54.4658 133.164 55.8535 132.057 55.8535 130.307V130.3C55.8535 128.796 55.0059 127.976 52.9824 127.531L51.8887 127.292C50.6035 127.012 50.0088 126.506 50.0088 125.699V125.692C50.0088 124.742 50.8701 124.113 52.1895 124.106C53.4404 124.106 54.2812 124.701 54.4316 125.706L54.4453 125.802H55.6758L55.6689 125.699C55.5596 124.086 54.1514 122.972 52.2236 122.972C50.1934 122.972 48.7578 124.106 48.751 125.727V125.733C48.751 127.176 49.6533 128.044 51.5811 128.468L52.6748 128.707C54.0283 129.008 54.5957 129.493 54.5957 130.361V130.368C54.5957 131.387 53.7002 132.029 52.2783 132.029C50.8496 132.029 49.8926 131.421 49.749 130.43L49.7354 130.334H48.5049L48.5117 130.43C48.6348 132.118 50.0771 133.164 52.21 133.164ZM57.2959 133H58.4443V125.378H58.4854L61.6367 133H62.6758L65.8271 125.378H65.8682V133H67.0166V123.136H65.5947L62.1768 131.448H62.1357L58.7178 123.136H57.2959V133ZM20.6074 150.164C22.8633 150.164 24.251 149.057 24.251 147.307V147.3C24.251 145.796 23.4033 144.976 21.3799 144.531L20.2861 144.292C19.001 144.012 18.4062 143.506 18.4062 142.699V142.692C18.4062 141.742 19.2676 141.113 20.5869 141.106C21.8379 141.106 22.6787 141.701 22.8291 142.706L22.8428 142.802H24.0732L24.0664 142.699C23.957 141.086 22.5488 139.972 20.6211 139.972C18.5908 139.972 17.1553 141.106 17.1484 142.727V142.733C17.1484 144.176 18.0508 145.044 19.9785 145.468L21.0723 145.707C22.4258 146.008 22.9932 146.493 22.9932 147.361V147.368C22.9932 148.387 22.0977 149.029 20.6758 149.029C19.2471 149.029 18.29 148.421 18.1465 147.43L18.1328 147.334H16.9023L16.9092 147.43C17.0322 149.118 18.4746 150.164 20.6074 150.164ZM28.4551 150.137C30.0615 150.137 31.2305 149.091 31.4219 147.737L31.4287 147.689H30.2598L30.2461 147.744C30.0479 148.537 29.4258 149.084 28.4551 149.084C27.2246 149.084 26.377 148.106 26.377 146.452V146.445C26.377 144.832 27.2041 143.807 28.4414 143.807C29.4873 143.807 30.0615 144.436 30.2393 145.146L30.2529 145.201H31.415L31.4082 145.146C31.2578 143.93 30.2119 142.754 28.4414 142.754C26.4658 142.754 25.1602 144.189 25.1602 146.432V146.438C25.1602 148.701 26.4385 150.137 28.4551 150.137ZM32.5225 150H33.7119V145.611C33.7119 144.531 34.3135 143.889 35.2363 143.889C35.5234 143.889 35.7764 143.923 35.8721 143.957V142.802C35.7764 142.788 35.5986 142.754 35.3936 142.754C34.5938 142.754 33.9785 143.273 33.7393 144.094H33.7119V142.891H32.5225V150ZM39.2695 150.137C40.3496 150.137 41.0742 149.651 41.457 148.988H41.4844V150H42.6738V142.891H41.4844V147.074C41.4844 148.284 40.7529 149.084 39.6318 149.084C38.5381 149.084 37.998 148.448 37.998 147.293V142.891H36.8086V147.505C36.8086 149.125 37.7109 150.137 39.2695 150.137ZM44.2256 150H45.415V145.543C45.415 144.552 46.0986 143.807 47.042 143.807C47.9238 143.807 48.498 144.374 48.498 145.235V150H49.6875V145.481C49.6875 144.511 50.3506 143.807 51.2939 143.807C52.2305 143.807 52.7705 144.388 52.7705 145.365V150H53.96V145.092C53.96 143.677 53.0508 142.754 51.6426 142.754C50.6445 142.754 49.8105 143.267 49.4141 144.121H49.3867C49.0791 143.253 48.3613 142.754 47.3906 142.754C46.4746 142.754 45.7637 143.226 45.4424 143.93H45.415V142.891H44.2256V150ZM59.0042 141.04V142.076H70.1342V141.04H59.0042ZM59.6482 145.156V146.178H69.5462V145.156H59.6482ZM58.3602 149.622V150.658H70.8342V149.622H58.3602ZM64.0022 141.866V150.154H65.1362V141.866H64.0022ZM62.7982 138.884C63.7222 139.57 64.8282 140.564 65.3322 141.222L66.2422 140.564C65.6962 139.892 64.5622 138.94 63.6522 138.296L62.7982 138.884ZM77.3582 140.06V141.026H84.3442V140.06H77.3582ZM76.7982 145.324V146.304H84.9182V145.324H76.7982ZM76.6302 142.804V143.77H85.0162V142.804H76.6302ZM80.3402 138.31V143.308H81.3342V138.31H80.3402ZM82.1882 143.56V149.846C82.1882 150.042 82.1322 150.098 81.9082 150.112C81.6982 150.126 80.9702 150.126 80.1862 150.098C80.3122 150.392 80.4522 150.812 80.4942 151.106C81.5442 151.106 82.2302 151.106 82.6362 150.938C83.0562 150.784 83.1962 150.49 83.1962 149.86V143.56H82.1882ZM77.8342 147.158C78.4502 147.914 79.1222 148.964 79.3742 149.65L80.2562 149.104C79.9622 148.432 79.2622 147.424 78.6462 146.682L77.8342 147.158ZM71.9542 145.688L72.2342 146.71C73.4242 146.318 74.9922 145.814 76.4622 145.324L76.3222 144.358C74.7122 144.876 73.0602 145.38 71.9542 145.688ZM72.1502 141.068V142.048H76.4202V141.068H72.1502ZM73.9562 138.254V149.86C73.9562 150.056 73.8862 150.112 73.7182 150.112C73.5502 150.126 73.0182 150.126 72.4022 150.098C72.5422 150.392 72.6682 150.826 72.7102 151.078C73.5922 151.092 74.1382 151.05 74.4602 150.896C74.8102 150.728 74.9502 150.434 74.9502 149.86V138.254H73.9562ZM91.8482 138.674C91.7502 140.536 91.7502 147.27 86.0382 150.182C86.3602 150.42 86.7102 150.742 86.8922 151.008C92.6882 147.858 92.8982 140.872 93.0102 138.674H91.8482ZM92.9682 138.954L91.9602 139.052C92.0582 140.34 92.4502 148.166 98.3862 151.008C98.5542 150.714 98.8762 150.364 99.1842 150.126C93.4162 147.48 93.0102 140.046 92.9682 138.954Z"
            fill="black"
          />

          <motion.path
            d="M225.921 133H229.236C232.169 133 233.892 131.175 233.892 128.064V128.051C233.892 124.954 232.155 123.136 229.236 123.136H225.921V133ZM227.151 131.893V124.243H229.154C231.39 124.243 232.634 125.604 232.634 128.064V128.078C232.634 130.525 231.39 131.893 229.154 131.893H227.151ZM235.423 133H241.534V131.893H236.653V128.502H241.281V127.408H236.653V124.243H241.534V123.136H235.423V133ZM246.012 133H247.229L250.865 123.136H249.573L246.634 131.523H246.606L243.667 123.136H242.375L246.012 133ZM213.514 144.442V145.31H220.458V144.442H213.514ZM213.248 146.836V147.732H220.752V146.836H213.248ZM217.91 144.722V150.868H218.862V144.722H217.91ZM215.04 144.764V147.312C215.04 148.082 214.746 149.566 213.332 150.434C213.57 150.574 213.892 150.868 214.032 151.064C215.614 150 215.95 148.166 215.95 147.312V144.764H215.04ZM211.778 140.788V141.544H215.712V140.788H211.778ZM218.232 140.788V141.544H222.194V140.788H218.232ZM221.788 138.842V149.762C221.788 149.972 221.718 150.056 221.494 150.056C221.27 150.07 220.514 150.07 219.744 150.042C219.898 150.336 220.038 150.826 220.08 151.106C221.144 151.106 221.844 151.092 222.264 150.91C222.684 150.728 222.824 150.392 222.824 149.762V138.842H221.788ZM211.862 138.842V139.654H215.362V142.762H211.862V143.56H216.356V138.842H211.862ZM222.292 138.842H217.588V143.574H222.292V142.776H218.596V139.654H222.292V138.842ZM211.232 138.842V151.134H212.268V138.842H211.232ZM231.518 142.454V143.28H234.43V142.454H231.518ZM230.622 146.514V147.27H235.34V146.514H230.622ZM225.932 138.842V139.696H229.852V138.842H225.932ZM229.558 138.842V139.01C228.704 140.914 226.478 142.412 224.378 143.042C224.574 143.224 224.826 143.588 224.952 143.826C227.22 143.042 229.53 141.474 230.58 139.122L229.922 138.8L229.74 138.842H229.558ZM231.77 138.24L230.916 138.506C232.05 140.956 234.192 142.804 236.866 143.63C237.02 143.378 237.286 143.014 237.51 142.804C234.906 142.118 232.778 140.41 231.77 138.24ZM234.626 138.338C234.122 138.912 233.198 139.696 232.554 140.172L233.17 140.662C233.842 140.2 234.724 139.528 235.41 138.884L234.626 138.338ZM236.306 139.752C235.788 140.298 234.836 141.082 234.164 141.544L234.808 142.034C235.494 141.6 236.404 140.928 237.076 140.284L236.306 139.752ZM226.366 142.51V143.336H228.858V145.87H229.796V142.51H226.366ZM226.002 144.806C225.848 145.828 225.568 147.144 225.33 147.984L226.212 148.138C226.436 147.27 226.716 145.898 226.912 144.806H226.002ZM228.858 146.934V147.074C228.69 149.076 228.536 149.874 228.284 150.112C228.172 150.224 228.018 150.238 227.752 150.238C227.486 150.238 226.73 150.224 225.946 150.154C226.114 150.406 226.226 150.784 226.254 151.064C227.024 151.092 227.766 151.106 228.13 151.092C228.564 151.05 228.816 150.98 229.068 150.742C229.432 150.378 229.614 149.482 229.796 147.354C229.81 147.228 229.824 146.934 229.824 146.934H228.858ZM231.14 142.454V143.546C231.14 144.218 230.958 144.988 229.838 145.59C230.034 145.716 230.37 146.052 230.51 146.248C231.756 145.52 232.05 144.47 232.05 143.56V142.454H231.14ZM235.102 146.514V146.654C234.332 148.768 232.232 149.916 229.824 150.364C229.992 150.56 230.202 150.91 230.286 151.134C232.932 150.546 235.13 149.3 236.054 146.696L235.452 146.472L235.284 146.514H235.102ZM231.952 147.214L231.126 147.438C232.05 149.398 233.926 150.644 236.488 151.12C236.628 150.868 236.894 150.462 237.118 150.252C234.64 149.902 232.764 148.838 231.952 147.214ZM226.464 144.806L226.324 145.632H229.208V144.806H226.464ZM226.044 146.934L225.89 147.746H229.124V146.934H226.044ZM233.94 142.454V144.554C233.94 145.226 234.01 145.436 234.206 145.618C234.388 145.772 234.696 145.828 234.976 145.828C235.116 145.828 235.508 145.828 235.662 145.828C235.858 145.828 236.138 145.814 236.278 145.758C236.46 145.702 236.628 145.59 236.698 145.436C236.796 145.268 236.838 144.862 236.866 144.498C236.614 144.428 236.278 144.26 236.096 144.106C236.082 144.456 236.068 144.722 236.04 144.848C235.998 144.946 235.928 145.016 235.872 145.044C235.83 145.058 235.69 145.058 235.564 145.058C235.438 145.058 235.256 145.058 235.158 145.058C235.046 145.058 234.976 145.058 234.92 145.016C234.864 144.974 234.864 144.834 234.864 144.638V142.454H233.94ZM225.554 140.508C226.212 140.914 226.982 141.516 227.346 141.95L227.99 141.306C227.612 140.9 226.814 140.312 226.17 139.934L225.554 140.508ZM240.954 140.592V141.264H248.99V140.592H240.954ZM240.786 146.584V147.242H249.2V146.584H240.786ZM242.284 147.662C242.746 148.054 243.264 148.614 243.502 148.992L244.216 148.586C243.978 148.208 243.432 147.662 242.956 147.312L242.284 147.662ZM242.34 143.504H247.632V144.12H242.34V143.504ZM242.34 142.384H247.632V142.972H242.34V142.384ZM241.5 141.838V144.68H248.5V141.838H241.5ZM246.288 146.066V148.516C246.288 148.656 246.246 148.698 246.092 148.698C245.938 148.712 245.406 148.712 244.832 148.698C244.93 148.88 245.042 149.104 245.084 149.314C245.924 149.314 246.456 149.314 246.764 149.202C247.1 149.104 247.184 148.964 247.184 148.544V146.066H246.288ZM240.982 145.394L241.038 146.066C242.844 146.038 245.434 145.954 247.954 145.87L247.982 145.31C245.378 145.366 242.718 145.394 240.982 145.394ZM246.778 145.044C247.31 145.45 247.982 146.08 248.304 146.5L248.906 146.038C248.584 145.646 247.926 145.058 247.352 144.652L246.778 145.044ZM244.482 139.948V145.66L245.378 145.604V139.948H244.482ZM239.344 138.884V151.134H240.31V139.724H249.662V151.064H250.67V138.884H239.344ZM239.82 149.552V150.392H250.096V149.552H239.82ZM264.67 142.566C264.068 143.266 263.018 144.246 262.29 144.82L262.864 145.408C263.62 144.848 264.614 143.994 265.37 143.238L264.67 142.566ZM258.104 138.618C258.51 139.276 258.902 140.172 259.042 140.76L259.966 140.41C259.798 139.822 259.392 138.968 258.958 138.31L258.104 138.618ZM257.04 140.606V141.544H265.3V140.606H257.04ZM258.888 143.126C261.408 145.198 261.52 149.02 260.708 149.846C260.498 150.126 260.246 150.168 259.938 150.168C259.672 150.168 259.294 150.14 258.888 150.098C259.07 150.378 259.14 150.812 259.154 151.064C259.518 151.092 259.868 151.106 260.134 151.106C260.708 151.106 261.086 150.98 261.478 150.574C262.654 149.496 262.542 144.988 259.7 142.692L258.888 143.126ZM260.708 140.956C259.756 142.104 258.132 143.182 256.634 143.84C256.83 144.022 257.152 144.4 257.278 144.596C258.79 143.812 260.512 142.608 261.59 141.292L260.708 140.956ZM261.982 141.138L261.142 141.292C261.716 144.904 262.822 147.97 264.852 149.566C265.02 149.3 265.356 148.936 265.58 148.754C263.634 147.382 262.514 144.442 261.982 141.138ZM260.12 143.994C259.406 144.792 257.964 145.772 256.914 146.262C257.138 146.444 257.39 146.78 257.516 147.018C258.594 146.374 260.036 145.31 260.82 144.442L260.12 143.994ZM260.96 145.8C259.952 147.158 257.852 148.642 256.102 149.314C256.34 149.51 256.606 149.846 256.746 150.084C258.496 149.286 260.582 147.704 261.674 146.262L260.96 145.8ZM263.13 138.254C262.892 138.898 262.43 139.822 262.066 140.424L262.906 140.704C263.284 140.158 263.746 139.318 264.138 138.576L263.13 138.254ZM253.12 138.856V151.134H254.072V139.808H256.424V138.856H253.12ZM256.102 138.856V139.136C255.808 140.102 255.29 141.768 254.786 143.042C255.794 144.134 256.046 145.086 256.046 145.842C256.046 146.262 255.976 146.64 255.752 146.794C255.64 146.878 255.486 146.92 255.318 146.92C255.094 146.948 254.828 146.934 254.506 146.906C254.66 147.172 254.744 147.578 254.758 147.83C255.08 147.844 255.43 147.844 255.71 147.816C255.99 147.774 256.242 147.69 256.438 147.564C256.83 147.284 256.984 146.696 256.984 145.94C256.984 145.072 256.76 144.092 255.724 142.93C256.2 141.81 256.718 140.368 257.124 139.22L256.452 138.814L256.284 138.856H256.102Z"
            fill="black"
          />
        </motion.svg>
      </span>
    </div>
  );
}

export default Triangle;
